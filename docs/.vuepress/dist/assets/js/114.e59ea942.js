(window.webpackJsonp=window.webpackJsonp||[]).push([[114],{625:function(s,n,t){"use strict";t.r(n);var a=t(38),e=Object(a.a)({},(function(){var s=this,n=s.$createElement,t=s._self._c||n;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"nginx-基础"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nginx-基础"}},[s._v("#")]),s._v(" nginx 基础")]),s._v(" "),t("ol",[t("li",[s._v("进入nginx容器进行相关配置")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## whereis nginx #可以在容器中查询出nginx的相关配置文件存放位置")]),s._v("\n")])])]),t("p",[s._v("文件夹 nodePro docke-compose 部署 两个node应用示例")]),s._v(" "),t("h2",{attrs:{id:"nas配置nginx过程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nas配置nginx过程"}},[s._v("#")]),s._v(" nas配置nginx过程")]),s._v(" "),t("p",[s._v("部署 vue前端应用")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("通过containerStation 安装 nginx")])]),s._v(" "),t("li",[t("p",[s._v("查询nginx相关配置文件存放位置  进入nginx容器   whereis nginx")])]),s._v(" "),t("li",[t("p",[s._v("在finalshell上传需要部署的文件（/share/temporary） |\n| 将本地文件拷贝到docker容器文件内（使用finalshell ssh连接nas ）\n| docker cp 你的文件路径 容器长ID:docker容器路径")])]),s._v(" "),t("li",[t("p",[s._v("配置nginx文件 ：")])])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("user  nginx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nworker_processes  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\nerror_log  /var/log/nginx/error.log warn"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\npid        /var/run/nginx.pid"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n\nevents "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    worker_connections  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1024")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n\nhttp "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    include       /etc/nginx/mime.types"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    default_type  application/octet-stream"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    log_format  main  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'$remote_addr - $remote_user [$time_local] \"$request\" '")]),s._v("\n                      "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'$status $body_bytes_sent \"$http_referer\" '")]),s._v("\n                      "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'"$http_user_agent" "$http_x_forwarded_for"\'')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    access_log  /var/log/nginx/access.log  main"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    sendfile        on"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#tcp_nopush     on;")]),s._v("\n\n    keepalive_timeout  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("65")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#gzip  on;")]),s._v("\n\n    server "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        listen       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        server_name  localhost"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#charset koi8-r;")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#access_log  logs/host.access.log  main;")]),s._v("\n        location / "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            root /share/temporary/h5"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            try_files "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$uri")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$uri")]),s._v("/ /index.html"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            index  index.html index.htm"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("h2",{attrs:{id:"通过-docker-compose-部署-多应用程序-nas"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#通过-docker-compose-部署-多应用程序-nas"}},[s._v("#")]),s._v(" 通过 docker-compose 部署 多应用程序 （nas）")]),s._v(" "),t("ol",[t("li",[s._v("通过 docker-compose部署demo  :\n隐藏参考文件 ： nodePro （包括前后端的访问 内外网映射）")])]),s._v(" "),t("ul",[t("li",[s._v("docker-compose多容器启动 node项目、 nginx（）   docker-compose.yml")]),s._v(" "),t("li",[s._v("nginx nginx映射配置 前端项目地址访问  default.conf")]),s._v(" "),t("li",[s._v("nodejs nodejs2 两个后端项目")]),s._v(" "),t("li",[s._v("statc文件夹 前端项目存放地址"),t("br"),s._v("\n（未完待续 完成水平扩展 负载均衡 nginx的水平扩展  不停机更新 版本回滚等）")])]),s._v(" "),t("ol",{attrs:{start:"2"}},[t("li",[s._v("仿照demo nodePro 去部署一个前后端一体的项目 千里云课堂 （mysql + vue + express ）")])]),s._v(" "),t("h2",{attrs:{id:"docker-mysql-导入sql文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker-mysql-导入sql文件"}},[s._v("#")]),s._v(" docker mysql 导入sql文件")]),s._v(" "),t("p",[s._v("在容器内操作 ："),t("br"),s._v("\nmysql -uroot -p test < test.sql")]),s._v(" "),t("p",[s._v("mysql -uroot -p payment < /home/temporary/payment.sql")]),s._v(" "),t("p",[s._v("mysql 基础操作 ：\nshow databases  ;  显示数据库表\nUSE payment;  选中数据库\nDESCRIBE adminpay;  // 查询数据库表结构")]),s._v(" "),t("h2",{attrs:{id:"mysql-查询-对外端口"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mysql-查询-对外端口"}},[s._v("#")]),s._v(" mysql 查询 对外端口")]),s._v(" "),t("p",[s._v("进入mysql")]),s._v(" "),t("p",[s._v("show global variables like 'port';")]),s._v(" "),t("h2",{attrs:{id:"docker启动mysql后-其他应用如何连接-mysql"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker启动mysql后-其他应用如何连接-mysql"}},[s._v("#")]),s._v(" docker启动MySQL后 其他应用如何连接 MySQL")]),s._v(" "),t("h2",{attrs:{id:"查看-启动的nodejs的日志"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看-启动的nodejs的日志"}},[s._v("#")]),s._v(" 查看 启动的nodejs的日志")]),s._v(" "),t("p",[s._v("pm2 logs")]),s._v(" "),t("h2",{attrs:{id:"docker-查可用版本"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker-查可用版本"}},[s._v("#")]),s._v(" docker 查可用版本")])])}),[],!1,null,null,null);n.default=e.exports}}]);