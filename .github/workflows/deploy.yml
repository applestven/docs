# # å†™ä¸€ä¸ªgithub workflow ymlè„šæœ¬ï¼Œå®Œæˆé™æ€é¡µé¢githubçš„è‡ªåŠ¨éƒ¨ç½²
# name: Deploy to GitHub Pages

# on:
#   push:
#     branches:
#       - main

# jobs:
#   deploy:
#     runs-on: ubuntu-latest

#     steps:
#     - name: Checkout repository
#       uses: actions/checkout@v2

#     - name: Set up Node.js
#       uses: actions/setup-node@v2
#       with:
#         node-version: 16

#     - name: view config 1
#       run: git branch -a

#     - name: Install dependencies
#       run: npm install

#     - name: Build catalog
#       run: npm run docs:navf

#     - name: Build VuePress site
#       run: npm run docs:build

#     - name: Change to the dist directory
#       run: cd docs/.vuepress/dist

#     - name: Set the CNAME file
#       run: echo 'itclass.top' > CNAME

#     - name: Initialize and commit changes
#       run: |
#         git config --global user.email "applestven@gmail.com"
#         git config --global user.name "applestven"
#         git add -A
#         git commit -m 'deploy'
#     - name: Push to gh-pages branch
#       run: |
#         git push -f https://${{ secrets.SSHS }}@github.com/applestven/docs.git HEAD:gh-pages

name: Deploy to GitHub Pages

on:
  push:
    branches:
      - main # æˆ–è€…ä½ çš„é»˜è®¤åˆ†æ”¯ï¼Œå¯èƒ½æ˜¯ 'master'

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout ğŸ›ï¸
      uses: actions/checkout@v3

    - name: Setup Node.js ğŸŒ
      uses: actions/setup-node@v3
      with:
        node-version: 16

    - name: Install Dependencies ğŸ”§
      run: npm i # å¦‚æœä½ çš„é¡¹ç›®ä½¿ç”¨npm, å¯¹äºyarnåˆ™ä½¿ç”¨yarn install

    - name: Build Site ğŸ—ï¸
      run: npm run build # å‡è®¾ä½ çš„æ„å»ºå‘½ä»¤æ˜¯è¿™æ ·çš„ï¼Œæ ¹æ®ä½ çš„å®é™…æ„å»ºå‘½ä»¤ä¿®æ”¹
      
    - name: view config 1
      run: ls

    - name: Deploy ğŸš€
      uses: JamesIves/github-pages-deploy-action@v4.2.5
      with:
        branch: gh-pages # ç›®æ ‡åˆ†æ”¯
        folder: .vuepress/dist # æ„å»ºåè¾“å‡ºçš„ç›®å½•ï¼Œæ ¹æ®ä½ çš„å®é™…æƒ…å†µè°ƒæ•´
        clean: true # æ˜¯å¦æ¸…ç†ç›®æ ‡åˆ†æ”¯ä¸Šçš„æ—§æ–‡ä»¶
        single-commit: true # å°†æ‰€æœ‰æ›´æ”¹ä½œä¸ºå•ä¸ªæäº¤æ¨é€